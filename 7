<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pple.tcg ¬∑ Seguimiento</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@400;500&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#08080d; --bg2:#0e0e16; --surface:#11111c; --surface2:#181825;
  --border:#22223a; --border2:#2d2d4a;
  --accent:#d4f53c; --accent-glow:rgba(212,245,60,0.15); --accent-dim:rgba(212,245,60,0.06);
  --text:#eeeef8; --text2:#9898b8; --text3:#55556a;
  --nm:#2ed573; --lp:#ffa502; --mp:#ff4757;
  --font-display:'Bebas Neue',sans-serif;
  --font-mono:'DM Mono',monospace;
  --font-body:'Plus Jakarta Sans',sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:var(--font-body);background:var(--bg);color:var(--text);min-height:100vh;}
body::after{content:'';position:fixed;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");pointer-events:none;z-index:9999;mix-blend-mode:overlay;}
::-webkit-scrollbar{width:4px;} ::-webkit-scrollbar-track{background:var(--bg);} ::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px;}

/* NAV */
nav{display:flex;align-items:center;justify-content:space-between;padding:0 40px;height:60px;border-bottom:1px solid var(--border);position:sticky;top:0;background:rgba(8,8,13,0.96);backdrop-filter:blur(24px);z-index:100;}
.logo{font-family:var(--font-display);font-size:1.8rem;letter-spacing:3px;cursor:pointer;}
.logo .dot{color:var(--accent);}
.nav-pills{display:flex;gap:0;border:1px solid var(--border);border-radius:6px;overflow:hidden;}
.nav-tab{padding:7px 22px;font-family:var(--font-mono);font-size:0.72rem;font-weight:500;letter-spacing:1px;text-transform:uppercase;color:var(--text2);cursor:pointer;border:none;background:none;border-right:1px solid var(--border);transition:all 0.15s;}
.nav-tab:last-child{border-right:none;}
.nav-tab:hover{background:var(--surface);color:var(--text);}
.nav-tab.active{background:var(--accent);color:#08080d;font-weight:700;}
.nav-right{display:flex;gap:10px;align-items:center;}
.nav-avatar{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,#3d2a6e,#d4f53c);display:flex;align-items:center;justify-content:center;font-family:var(--font-mono);font-size:0.72rem;font-weight:700;color:#08080d;cursor:pointer;}

/* PAGE HEADER */
.page-header{padding:28px 40px 24px;border-bottom:1px solid var(--border);background:var(--bg2);display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap;}
.ph-eyebrow{font-family:var(--font-mono);font-size:0.62rem;color:var(--accent);letter-spacing:2px;text-transform:uppercase;margin-bottom:6px;}
.ph-title{font-family:var(--font-display);font-size:2.2rem;letter-spacing:2px;}




.tracking-input::placeholder{color:var(--text3);}

.tracking-btn:hover{box-shadow:inset 0 0 12px rgba(0,0,0,0.1);}

/* MAIN LAYOUT */
.main{max-width:1300px;margin:0 auto;padding:28px 40px 80px;display:grid;grid-template-columns:1fr 380px;gap:24px;}

/* LEFT */
.left-col{}

/* Status hero card */
.status-hero{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:24px;margin-bottom:20px;position:relative;overflow:hidden;}
.sh-glow{position:absolute;top:-60px;right:-60px;width:250px;height:250px;border-radius:50%;background:radial-gradient(circle,rgba(212,245,60,0.08) 0%,transparent 70%);pointer-events:none;}
.sh-top{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:20px;gap:16px;flex-wrap:wrap;}
.sh-left{}
.sh-status-label{font-family:var(--font-mono);font-size:0.6rem;color:var(--text3);letter-spacing:2px;text-transform:uppercase;margin-bottom:6px;}
.sh-status{font-family:var(--font-display);font-size:2.2rem;letter-spacing:1px;display:flex;align-items:center;gap:12px;}
.status-dot{width:12px;height:12px;border-radius:50%;flex-shrink:0;}
.dot-transit{background:var(--lp);box-shadow:0 0 10px rgba(255,165,2,0.4);animation:pulse-dot 2s infinite;}
.dot-delivered{background:var(--nm);box-shadow:0 0 10px rgba(46,213,115,0.4);}
.dot-pending{background:var(--text3);}
@keyframes pulse-dot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.6;transform:scale(1.2)}}
.sh-eta{text-align:right;}
.sh-eta-label{font-family:var(--font-mono);font-size:0.6rem;color:var(--text3);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:4px;}
.sh-eta-val{font-family:var(--font-display);font-size:1.6rem;letter-spacing:1px;color:var(--accent);}
.sh-eta-sub{font-family:var(--font-mono);font-size:0.65rem;color:var(--text3);}

/* Route bar */
.route-bar{display:flex;align-items:center;gap:0;background:var(--bg2);border:1px solid var(--border);border-radius:10px;overflow:hidden;}
.rb-point{flex:1;padding:14px 16px;}
.rb-point.origin{border-right:1px solid var(--border);}
.rb-point.dest{border-left:1px solid var(--border);}
.rb-point.mid{flex:0 0 auto;padding:14px 20px;display:flex;flex-direction:column;align-items:center;}
.rbp-label{font-family:var(--font-mono);font-size:0.58rem;color:var(--text3);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:4px;}
.rbp-city{font-family:var(--font-display);font-size:1rem;letter-spacing:0.5px;}
.rbp-addr{font-family:var(--font-mono);font-size:0.62rem;color:var(--text3);margin-top:2px;letter-spacing:0.3px;}
.rb-arrow{font-size:1.2rem;color:var(--text3);}
.rb-progress{width:120px;height:4px;background:var(--border);border-radius:2px;margin-top:6px;overflow:hidden;}
.rbp-fill{height:100%;background:var(--accent);border-radius:2px;transition:width 0.5s ease;}

/* MAP */
.map-section{background:var(--surface);border:1px solid var(--border);border-radius:14px;overflow:hidden;margin-bottom:20px;}
.map-header{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;}
.map-title{font-family:var(--font-display);font-size:1rem;letter-spacing:1px;}
.map-carrier{display:flex;align-items:center;gap:8px;font-family:var(--font-mono);font-size:0.68rem;color:var(--text3);}
.carrier-logo{width:24px;height:24px;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:700;color:#fff;}
.map-canvas{width:100%;height:280px;background:linear-gradient(135deg,#0a0a14 0%,#0e0e1e 50%,#0a0a14 100%);position:relative;overflow:hidden;}
/* Spain SVG map */
.map-canvas svg{width:100%;height:100%;}
.map-pin{position:absolute;transform:translate(-50%,-100%);display:flex;flex-direction:column;align-items:center;cursor:pointer;}
.pin-dot{width:14px;height:14px;border-radius:50%;border:2px solid var(--bg);position:relative;}
.pin-dot.origin{background:var(--text3);}
.pin-dot.current{background:var(--lp);box-shadow:0 0 12px rgba(255,165,2,0.6);animation:pulse-dot 1.5s infinite;}
.pin-dot.dest{background:var(--nm);}
.pin-label{font-family:var(--font-mono);font-size:0.6rem;color:var(--text);background:rgba(8,8,13,0.9);border:1px solid var(--border2);border-radius:4px;padding:2px 7px;margin-top:4px;white-space:nowrap;letter-spacing:0.3px;}
.route-line{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;}

/* TIMELINE */
.timeline-section{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:24px;}
.tl-title{font-family:var(--font-display);font-size:1rem;letter-spacing:1px;margin-bottom:20px;}
.timeline{display:flex;flex-direction:column;gap:0;}
.tl-item{display:flex;gap:16px;position:relative;}
.tl-item:not(:last-child) .tl-line{position:absolute;left:15px;top:32px;bottom:-8px;width:2px;background:var(--border);}
.tl-item.done:not(:last-child) .tl-line{background:var(--accent);}
.tl-item.current:not(:last-child) .tl-line{background:linear-gradient(to bottom,var(--accent),var(--border));}
.tl-icon-wrap{flex-shrink:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.85rem;border:2px solid;position:relative;z-index:1;margin-bottom:20px;}
.tl-icon-wrap.done{background:var(--accent);border-color:var(--accent);}
.tl-icon-wrap.current{background:rgba(255,165,2,0.15);border-color:var(--lp);box-shadow:0 0 12px rgba(255,165,2,0.3);}
.tl-icon-wrap.pending{background:var(--surface2);border-color:var(--border2);}
.tl-content{flex:1;padding-bottom:20px;}
.tl-item:last-child .tl-content{padding-bottom:0;}
.tl-event{font-size:0.85rem;font-weight:600;margin-bottom:3px;}
.tl-item.pending .tl-event{color:var(--text3);}
.tl-item.current .tl-event{color:var(--lp);}
.tl-detail{font-family:var(--font-mono);font-size:0.65rem;color:var(--text3);letter-spacing:0.3px;margin-bottom:2px;}
.tl-time{font-family:var(--font-mono);font-size:0.62rem;color:var(--text3);letter-spacing:0.3px;}

/* RIGHT SIDEBAR */
.right-col{}
.sidebar-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:16px;}
.sc-title{font-family:var(--font-display);font-size:1rem;letter-spacing:1px;margin-bottom:14px;}

/* Package info */
.pkg-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid var(--border);}
.pkg-row:last-child{border-bottom:none;}
.pkg-label{font-family:var(--font-mono);font-size:0.65rem;color:var(--text3);letter-spacing:0.5px;}
.pkg-val{font-family:var(--font-mono);font-size:0.72rem;font-weight:500;}
.pkg-val.accent{color:var(--accent);}
.pkg-val.green{color:var(--nm);}




/* Card preview */
.card-preview{display:flex;align-items:center;gap:12px;padding:12px;background:var(--bg2);border:1px solid var(--border);border-radius:8px;}
.cp-img{width:40px;height:55px;object-fit:contain;border-radius:4px;background:var(--surface2);}
.cp-info{}
.cp-name{font-size:0.85rem;font-weight:600;margin-bottom:2px;}
.cp-set{font-family:var(--font-mono);font-size:0.62rem;color:var(--text3);}
.cp-price{font-family:var(--font-display);font-size:1rem;color:var(--accent);margin-top:4px;letter-spacing:0.5px;}
.cp-cond{font-family:var(--font-mono);font-size:0.6rem;padding:1px 6px;background:rgba(46,213,115,0.1);border:1px solid rgba(46,213,115,0.2);color:var(--nm);border-radius:3px;display:inline-block;margin-top:3px;}

/* Parties */
.party-row{display:flex;align-items:center;gap:10px;padding:8px 0;border-bottom:1px solid var(--border);}
.party-row:last-child{border-bottom:none;}
.party-av{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:var(--font-mono);font-size:0.72rem;font-weight:700;color:#08080d;flex-shrink:0;}
.party-info{flex:1;}
.party-role{font-family:var(--font-mono);font-size:0.58rem;color:var(--text3);letter-spacing:1.5px;text-transform:uppercase;margin-bottom:1px;}
.party-name{font-size:0.82rem;font-weight:600;}
.party-rating{font-family:var(--font-mono);font-size:0.65rem;color:var(--accent);}

/* Actions */
.action-btn{width:100%;padding:10px;border-radius:6px;font-family:var(--font-mono);font-size:0.72rem;font-weight:600;letter-spacing:0.5px;cursor:pointer;transition:all 0.15s;text-transform:uppercase;margin-bottom:8px;display:flex;align-items:center;justify-content:center;gap:8px;}
.action-btn:last-child{margin-bottom:0;}
.ab-primary{border:none;background:var(--accent);color:#08080d;}
.ab-primary:hover{box-shadow:0 0 16px var(--accent-glow);}
.ab-secondary{border:1px solid var(--border2);background:none;color:var(--text2);}
.ab-secondary:hover{border-color:var(--accent);color:var(--accent);}
.ab-danger{border:1px solid rgba(255,71,87,0.2);background:none;color:var(--mp);}
.ab-danger:hover{background:rgba(255,71,87,0.07);}

/* Other shipments list */
.shipments-list{display:flex;flex-direction:column;gap:8px;}
.shipment-item{display:flex;align-items:center;gap:12px;padding:10px 12px;background:var(--bg2);border:1px solid var(--border);border-radius:8px;cursor:pointer;transition:all 0.15s;}
.shipment-item:hover{border-color:var(--border2);}
.shipment-item.active{border-color:rgba(212,245,60,0.3);background:var(--accent-dim);}
.si-thumb{width:30px;height:40px;object-fit:contain;border-radius:3px;background:var(--surface);flex-shrink:0;}
.si-info{flex:1;min-width:0;}
.si-name{font-size:0.78rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:2px;}
.si-meta{font-family:var(--font-mono);font-size:0.6rem;color:var(--text3);}
.si-status{font-family:var(--font-mono);font-size:0.6rem;padding:2px 7px;border-radius:3px;flex-shrink:0;}
.sis-transit{background:rgba(255,165,2,0.1);color:var(--lp);}
.sis-delivered{background:rgba(46,213,115,0.1);color:var(--nm);}
.sis-pending{background:var(--surface2);color:var(--text3);}

/* Confirm delivery modal */
.modal-overlay{position:fixed;inset:0;background:rgba(4,4,8,0.9);backdrop-filter:blur(16px);z-index:500;display:none;align-items:center;justify-content:center;padding:20px;}
.modal-overlay.open{display:flex;}
.modal{background:var(--surface);border:1px solid var(--border2);border-radius:14px;width:100%;max-width:440px;padding:28px;animation:mIn 0.2s ease;}
@keyframes mIn{from{opacity:0;transform:scale(0.96)}to{opacity:1;transform:scale(1)}}
.modal-icon{font-size:3rem;margin-bottom:12px;text-align:center;}
.modal-title{font-family:var(--font-display);font-size:1.6rem;letter-spacing:1px;margin-bottom:6px;text-align:center;}
.modal-sub{font-family:var(--font-mono);font-size:0.65rem;color:var(--text3);text-align:center;line-height:1.6;letter-spacing:0.3px;margin-bottom:20px;}
.modal-btns{display:flex;gap:8px;}
.btn-cancel{flex:1;padding:11px;border:1px solid var(--border);border-radius:6px;background:none;color:var(--text3);font-family:var(--font-mono);font-size:0.72rem;font-weight:600;cursor:pointer;text-transform:uppercase;letter-spacing:0.5px;transition:all 0.15s;}
.btn-cancel:hover{border-color:var(--border2);color:var(--text2);}
.btn-confirm{flex:2;padding:11px;border:none;border-radius:6px;background:var(--nm);color:#08080d;font-family:var(--font-mono);font-size:0.72rem;font-weight:700;cursor:pointer;text-transform:uppercase;letter-spacing:1px;transition:all 0.15s;}
.btn-confirm:hover{box-shadow:0 0 16px rgba(46,213,115,0.3);}

@media(max-width:960px){
  nav{padding:0 18px;}
  .nav-pills{display:none;}
  .page-header{padding:20px 18px 18px;flex-direction:column;align-items:flex-start;}
  
  .main{grid-template-columns:1fr;padding:20px 18px 60px;}
  .right-col{order:-1;}
  .map-canvas{height:220px;}
}
</style>
</head>
<body>

<nav>
  <div class="logo" onclick="window.location.href='pple-tcg.html'">PPLE<span class="dot">.</span>TCG</div>
  <div class="nav-pills">
    <button class="nav-tab" onclick="window.location.href='pple-tcg.html'">Mercado</button>
    <button class="nav-tab" onclick="window.location.href='pple-tcg-vender.html'">Vender</button>
    <button class="nav-tab" onclick="window.location.href='pple-tcg-verificacion.html'">Verificaci√≥n</button>
    <button class="nav-tab" onclick="window.location.href='pple-tcg-portfolio.html'">Portfolio</button>
    <button class="nav-tab" onclick="window.location.href='pple-tcg-mensajes.html'">Mensajes</button>
  </div>
  <div class="nav-right">
    <div class="nav-avatar">J</div>
  </div>
</nav>

<!-- PAGE HEADER -->
<div class="page-header">
  <div>
    <div class="ph-eyebrow">Mis env√≠os ¬∑ 3 activos</div>
    <div class="ph-title">SEGUIMIENTO</div>
  </div>

</div>

<div class="main">
  <div class="left-col">

    <!-- STATUS HERO -->
    <div class="status-hero">
      <div class="sh-glow"></div>
      <div class="sh-top">
        <div class="sh-left">
          <div class="sh-status-label">Estado actual</div>
          <div class="sh-status">
            <div class="status-dot dot-transit"></div>
            EN TR√ÅNSITO
          </div>
          <div style="font-family:var(--font-mono);font-size:0.68rem;color:var(--text3);margin-top:6px;letter-spacing:0.3px;">
            Centro log√≠stico Madrid ¬∑ Actualizado hace 2h
          </div>
        </div>
        <div class="sh-eta">
          <div class="sh-eta-label">Entrega estimada</div>
          <div class="sh-eta-val">Ma√±ana</div>
          <div class="sh-eta-sub">28 Feb ¬∑ 9:00‚Äì14:00h</div>
        </div>
      </div>
      <div class="route-bar">
        <div class="rb-point origin">
          <div class="rbp-label">Origen</div>
          <div class="rbp-city">Madrid</div>
          <div class="rbp-addr">@TrainerRed99</div>
        </div>
        <div class="rb-point mid">
          <div class="rb-arrow">‚Üí</div>
          <div class="rb-progress" style="margin-top:6px"><div class="rbp-fill" style="width:65%"></div></div>
          <div style="font-family:var(--font-mono);font-size:0.58rem;color:var(--text3);margin-top:4px;">65%</div>
        </div>
        <div class="rb-point dest">
          <div class="rbp-label">Destino</div>
          <div class="rbp-city">Barcelona</div>
          <div class="rbp-addr">@TrainerJuan</div>
        </div>
      </div>
    </div>

    <!-- MAP -->
    <div class="map-section">
      <div class="map-header">
        <div class="map-title">UBICACI√ìN DEL PAQUETE</div>
        <div class="map-carrier">
          <div class="carrier-logo" style="background:#e60000;">C</div>
          Correos Express ¬∑ ES123456789ES
        </div>
      </div>
      <div class="map-canvas" id="mapCanvas">
        <!-- Spain map SVG -->
        <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg" id="spainMap"></svg>
        <!-- Route line canvas -->
        <canvas class="route-line" id="routeCanvas" width="800" height="600"></canvas>
        <!-- Pins -->
        <div class="map-pin" style="left:48%;top:55%">
          <div class="pin-dot origin"></div>
          <div class="pin-label">Madrid ¬∑ Origen</div>
        </div>
        <div class="map-pin" style="left:52%;top:44%" id="currentPin">
          <div class="pin-dot current"></div>
          <div class="pin-label">üì¶ Aqu√≠ ahora</div>
        </div>
        <div class="map-pin" style="left:70%;top:32%">
          <div class="pin-dot dest"></div>
          <div class="pin-label">Barcelona ¬∑ Destino</div>
        </div>
      </div>
    </div>

    <!-- TIMELINE -->
    <div class="timeline-section">
      <div class="tl-title">HISTORIAL DE EVENTOS</div>
      <div class="timeline" id="timeline"></div>
    </div>

  </div>

  <!-- RIGHT -->
  <div class="right-col">

    <!-- Card info -->
    <div class="sidebar-card">
      <div class="sc-title">ART√çCULO</div>
      <div class="card-preview">
        <img class="cp-img" src="https://assets.tcgdex.net/univ/sv/sv03/3/high.png" onerror="this.style.background='var(--surface2)'" alt="">
        <div class="cp-info">
          <div class="cp-name">Charizard ex</div>
          <div class="cp-set">Obsidian Flames ¬∑ #003</div>
          <div class="cp-price">‚Ç¨124.50</div>
          <div class="cp-cond">NM</div>
        </div>
      </div>
    </div>

    <!-- Package details -->
    <div class="sidebar-card">
      <div class="sc-title">DATOS DEL ENV√çO</div>
      <div class="pkg-row">
        <span class="pkg-label">Transportista</span>
        <span class="pkg-val">Correos Express</span>
      </div>

      <div class="pkg-row">
        <span class="pkg-label">Servicio</span>
        <span class="pkg-val">24h Certificado</span>
      </div>
      <div class="pkg-row">
        <span class="pkg-label">Enviado</span>
        <span class="pkg-val">26 Feb 2026</span>
      </div>
      <div class="pkg-row">
        <span class="pkg-label">Entrega estimada</span>
        <span class="pkg-val accent">28 Feb 2026</span>
      </div>
      <div class="pkg-row">
        <span class="pkg-label">Estado</span>
        <span class="pkg-val green">En tr√°nsito</span>
      </div>
    </div>

    <!-- Parties -->
    <div class="sidebar-card">
      <div class="sc-title">PARTES</div>
      <div class="party-row">
        <div class="party-av" style="background:linear-gradient(135deg,#1a1a2e,#e94560)">T</div>
        <div class="party-info">
          <div class="party-role">Vendedor</div>
          <div class="party-name">@TrainerRed99</div>
          <div class="party-rating">‚òÖ 4.9</div>
        </div>
        <button style="padding:5px 10px;border:1px solid var(--border2);border-radius:5px;background:none;color:var(--text3);font-family:var(--font-mono);font-size:0.62rem;cursor:pointer;transition:all 0.15s;" onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--accent)'" onmouseout="this.style.borderColor='var(--border2)';this.style.color='var(--text3)'" onclick="window.location.href='pple-tcg-mensajes.html'">üí¨</button>
      </div>
      <div class="party-row">
        <div class="party-av" style="background:linear-gradient(135deg,#3d2a6e,#d4f53c)">J</div>
        <div class="party-info">
          <div class="party-role">Comprador (t√∫)</div>
          <div class="party-name">@TrainerJuan</div>
          <div class="party-rating">Barcelona, Espa√±a</div>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="sidebar-card">
      <div class="sc-title">ACCIONES</div>
      <button class="action-btn ab-primary" onclick="openConfirmModal()">‚úì Confirmar recepci√≥n</button>
      <div style="padding:10px 12px;background:var(--accent-dim);border:1px solid rgba(212,245,60,0.15);border-radius:6px;font-family:var(--font-mono);font-size:0.65rem;color:var(--text2);line-height:1.6;letter-spacing:0.3px;">üìß El n√∫mero de seguimiento te fue enviado por email al confirmar la compra</div>
      <button class="action-btn ab-secondary" onclick="window.location.href='pple-tcg-mensajes.html'">üí¨ Contactar al vendedor</button>
      <button class="action-btn ab-danger">‚öë Reportar problema</button>
    </div>

    <!-- Other shipments -->
    <div class="sidebar-card">
      <div class="sc-title">MIS ENV√çOS</div>
      <div class="shipments-list" id="shipmentsList"></div>
    </div>

  </div>
</div>

<!-- CONFIRM DELIVERY MODAL -->
<div class="modal-overlay" id="confirmModal" onclick="closeModal(event)">
  <div class="modal">
    <div class="modal-icon">üì¶</div>
    <div class="modal-title">¬øHAS RECIBIDO EL PAQUETE?</div>
    <div class="modal-sub">Al confirmar la recepci√≥n, los fondos se liberar√°n al vendedor y podr√°s dejar una valoraci√≥n. Esta acci√≥n no se puede deshacer.</div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="document.getElementById('confirmModal').classList.remove('open')">Cancelar</button>
      <button class="btn-confirm" onclick="confirmDelivery()">‚úì S√≠, lo he recibido</button>
    </div>
  </div>
</div>

<script>
// ---- TIMELINE DATA ----
const EVENTS = [
  { status:'done',    icon:'‚úì', event:'Enviado',       detail:'El vendedor ha entregado el paquete al transportista',  time:'26 Feb ¬∑ 09:22h' },
  { status:'current', icon:'‚Üí', event:'En tr√°nsito',   detail:'Correos Express ¬∑ En camino hacia Barcelona',           time:'27 Feb ¬∑ 06:40h' },
  { status:'pending', icon:'‚óã', event:'Entregado',     detail:'Confirma la recepci√≥n cuando llegue',                   time:'Estimado: 28 Feb' },
];

const SHIPMENTS = [
  { name:'Charizard ex',    img:'https://assets.tcgdex.net/univ/sv/sv03/3/high.png',    status:'transit',   statusLabel:'En tr√°nsito', role:'Comprando', tracking:'ES123456789ES' },
  { name:'Pikachu ex',      img:'https://assets.tcgdex.net/univ/sv/sv02/83/high.png',   status:'delivered', statusLabel:'Entregado',   role:'Comprando', tracking:'ES987654321ES' },
  { name:'Mewtwo ex PSA 10',img:'https://assets.tcgdex.net/univ/sv/sv3pt5/11/high.png', status:'pending',   statusLabel:'Pendiente',   role:'Vendiendo', tracking:'‚Äî' },
];

// ---- RENDER TIMELINE ----
function renderTimeline() {
  document.getElementById('timeline').innerHTML = EVENTS.map((e, i) => `
    <div class="tl-item ${e.status}">
      <div class="tl-line"></div>
      <div class="tl-icon-wrap ${e.status}">${e.icon}</div>
      <div class="tl-content">
        <div class="tl-event">${e.event}</div>
        <div class="tl-detail">${e.detail}</div>
        <div class="tl-time">${e.time}</div>
      </div>
    </div>`).join('');
}

// ---- RENDER OTHER SHIPMENTS ----
function renderShipments() {
  document.getElementById('shipmentsList').innerHTML = SHIPMENTS.map((s, i) => `
    <div class="shipment-item ${i===0?'active':''}" onclick="selectShipment(${i})">
      <img class="si-thumb" src="${s.img}" onerror="this.style.display='none'" alt="">
      <div class="si-info">
        <div class="si-name">${s.name}</div>
        <div class="si-meta">${s.role} ¬∑ ${s.tracking}</div>
      </div>
      <div class="si-status sis-${s.status}">${s.statusLabel}</div>
    </div>`).join('');
}

function selectShipment(i) {
  document.querySelectorAll('.shipment-item').forEach((el, idx) => {
    el.classList.toggle('active', idx === i);
  });
}

// ---- MAP ----
function drawMap() {
  const canvas = document.getElementById('spainMap');
  // Simple Spain outline as SVG path
  canvas.innerHTML = `
    <defs>
      <radialGradient id="mapGlow" cx="50%" cy="50%" r="50%">
        <stop offset="0%" stop-color="#1a1a30" stop-opacity="1"/>
        <stop offset="100%" stop-color="#08080d" stop-opacity="1"/>
      </radialGradient>
      <filter id="blur">
        <feGaussianBlur stdDeviation="1"/>
      </filter>
    </defs>
    <rect width="800" height="600" fill="url(#mapGlow)"/>
    <!-- Grid lines -->
    ${Array.from({length:8},(_,i)=>`<line x1="${i*100+50}" y1="0" x2="${i*100+50}" y2="600" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>`).join('')}
    ${Array.from({length:6},(_,i)=>`<line x1="0" y1="${i*100+50}" x2="800" y2="${i*100+50}" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>`).join('')}
    <!-- Spain outline (simplified) -->
    <path d="M 120,200 L 100,240 L 80,280 L 90,320 L 130,360 L 160,400 L 200,430 L 260,440 L 320,450 L 380,445 L 440,430 L 500,400 L 540,370 L 580,330 L 600,290 L 610,250 L 590,210 L 560,180 L 520,160 L 480,150 L 440,145 L 400,140 L 360,138 L 320,140 L 280,148 L 240,160 L 200,175 L 160,188 Z"
          fill="rgba(212,245,60,0.04)" stroke="rgba(212,245,60,0.15)" stroke-width="1.5"/>
    <!-- Route SVG line -->
    <path d="M 395,315 Q 450,270 555,225" stroke="rgba(212,245,60,0.3)" stroke-width="2" stroke-dasharray="8,4" fill="none"/>
    <!-- Current position glow -->
    <circle cx="468" cy="270" r="18" fill="rgba(255,165,2,0.08)"/>
    <circle cx="468" cy="270" r="8" fill="rgba(255,165,2,0.15)"/>
  `;
}

// ---- ACTIONS ----
function openConfirmModal() {
  document.getElementById('confirmModal').classList.add('open');
}

function closeModal(e) {
  if (e.target === document.getElementById('confirmModal'))
    document.getElementById('confirmModal').classList.remove('open');
}

function confirmDelivery() {
  document.getElementById('confirmModal').classList.remove('open');
  // Update status
  const dot = document.querySelector('.status-dot');
  dot.className = 'status-dot dot-delivered';
  document.querySelector('.sh-status').innerHTML = '<div class="status-dot dot-delivered"></div> ENTREGADO';
  document.querySelector('.sh-eta-val').textContent = '‚úì Recibido';
  document.querySelector('.sh-eta-sub').textContent = '27 Feb ¬∑ Hoy';
  // Update last timeline item
  const items = document.querySelectorAll('.tl-item');
  items.forEach(el => {
    el.classList.remove('current','pending');
    el.classList.add('done');
    el.querySelector('.tl-icon-wrap').className = 'tl-icon-wrap done';
    el.querySelector('.tl-icon-wrap').textContent = '‚úì';
  });
}




function openCarrierWeb() {
  const urls = {
    correos: 'https://www.correos.es/es/es/herramientas/localizador/envios/index.html',
    correos_express: 'https://www.correosexpress.com/web/correosexpress/home',
    seur: 'https://www.seur.com/seguimiento-online.do',
    inpost: 'https://inpost.es/seguimiento',
  };
  // Default to Correos Express for this demo
  window.open(urls['correos_express'], '_blank');
}

// ---- INIT ----
renderTimeline();
renderShipments();
drawMap();
</script>
</body>
</html>
